<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.abandon.mapper.UserInfoMapper">
  <resultMap id="BaseResultMap" type="UserInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 17 23:21:18 CST 2018.
    -->
    <id column="user_id" jdbcType="VARCHAR" property="userId" />
    <result column="user_pw" jdbcType="VARCHAR" property="userPw" />
    <result column="user_name" jdbcType="VARCHAR" property="userName" />
    <result column="user_url" jdbcType="VARCHAR" property="userUrl" />
    <result column="user_sex" jdbcType="VARCHAR" property="userSex" />
    <result column="user_age" jdbcType="INTEGER" property="userAge" />
    <result column="user_phone" jdbcType="VARCHAR" property="userPhone" />
    <result column="user_beizhu" jdbcType="VARCHAR" property="userBeizhu" />
    <result column="user_time" jdbcType="TIMESTAMP" property="userTime" />
    <result column="is_user" jdbcType="VARCHAR" property="isUser" />
    <result column="user_anthority" jdbcType="VARCHAR" property="userAnthority" />
  </resultMap>
  
	<!-- 根据账号密码查询用户信息 -->			
		<select id="getUser" parameterType="UserInfo" resultMap="BaseResultMap">
			select*from user_info where user_id=#{userId} and user_pw=#{userPw} and is_user='1'
		</select>
	<!-- 添加用户信息 -->
		<insert id="addUser" parameterType="UserInfo">
			insert into user_info (user_id,user_pw,user_name,user_url,user_sex,user_age,user_phone,user_beizhu,user_time,is_user,user_anthority)
			values(#{userId},#{userPw},#{userName},#{userUrl},#{userSex},#{userAge},#{userPhone},#{userBeizhu},now(),'1','1')
		</insert>
	<!-- 查询用户信息 is_user 0 无效 1 有效 -->	
		<select id="selectUser" parameterType="UserInfo" resultMap="BaseResultMap">
			select*from user_info where is_user='1'
			<if test="userName!=null and userName!=''">
				and user_name like #{userName}
			</if>
			<if test="userSex!=null and userSex!=''">
				and user_sex = #{userSex}
			</if>
		</select>
	<!-- 根据用户id信息查询 -->
		<select id="getUserInfo" parameterType="String" resultMap="BaseResultMap">
			select*from user_info where 	is_user='1'	
				and user_id = #{userId}  			
		</select>
	<!-- 修改用户信息 -->	
		<update id="updateUser" parameterType="UserInfo">
			update user_info set user_pw=#{userPw},user_name=#{userName},user_url=#{userUrl},user_sex=#{userSex},user_age=#{userAge},user_phone=#{userPhone},user_beizhu=#{userBeizhu},is_user=#{isUser},user_anthority=#{userAnthority}
			where user_id=#{userId} 
		</update>	
	<!-- 根据id删除信息 -->
		<delete id="deleteUser" parameterType="String">
			delete from user_info where user_id=#{userId}
		</delete>
</mapper>